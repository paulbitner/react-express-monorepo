{"ast":null,"code":"import _slicedToArray from\"C:/Users/pbitn/Desktop/learning/React/reactjs-ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import style from\"styles/SingleProduct.module.css\";import MaxContentWidth from\"components/Layout/MaxWidthContainer\";import{useSingleProduct}from\"./api/getSingleProduct\";import TwoColFlex from\"components/Layout/TwoColFlex\";import VariantSelector from\"./components/VariantSelector\";import Button from\"components/Button\";import{useAppSelector,useAppDispatch}from\"hooks\";import{addProductToCart,selectCart}from\"stores/cartSlice\";import{openCartModal,selectModal}from\"stores/cartModalSlice\";/* Uses slug in URL to fetch the product data from the API. */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SingleProduct=function SingleProduct(){var _singleProductQuery$d5,_singleProductQuery$d6,_singleProductQuery$d7,_singleProductQuery$d8,_singleProductQuery$d9,_singleProductQuery$d10,_singleProductQuery$d11;var cart=useAppSelector(selectCart);var dispatch=useAppDispatch();var openCart=useAppSelector(selectModal);var _useParams=useParams(),slug=_useParams.slug;var singleProductQuery=useSingleProduct({slug:slug});var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedvariantID=_useState2[0],setselectedvariantID=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),selectedvariantIDName=_useState4[0],setselectedvariantIDName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectedvariantPrice=_useState6[0],setselectedPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),productImage=_useState8[0],setProductImage=_useState8[1];function updateselectedvariantID(index,variantName,variantImage,variantPrice){setselectedvariantID(index);setselectedvariantIDName(variantName);setselectedPrice(variantPrice);setProductImage(variantImage);}function updateCart(){dispatch(addProductToCart({variantID:selectedvariantID,variantImage:productImage,variantName:selectedvariantIDName,variantPrice:selectedvariantPrice,quantity:1}));dispatch(openCartModal('open'));}useEffect(function(){if(singleProductQuery.status===\"success\"){var _singleProductQuery$d,_singleProductQuery$d2,_singleProductQuery$d3,_singleProductQuery$d4;setselectedvariantID((_singleProductQuery$d=singleProductQuery.data)===null||_singleProductQuery$d===void 0?void 0:_singleProductQuery$d.productVariants[0].variantID);setselectedvariantIDName((_singleProductQuery$d2=singleProductQuery.data)===null||_singleProductQuery$d2===void 0?void 0:_singleProductQuery$d2.productVariants[0].variantName);setselectedPrice((_singleProductQuery$d3=singleProductQuery.data)===null||_singleProductQuery$d3===void 0?void 0:_singleProductQuery$d3.productVariants[0].variantPrice);setProductImage((_singleProductQuery$d4=singleProductQuery.data)===null||_singleProductQuery$d4===void 0?void 0:_singleProductQuery$d4.productVariants[0].variantImage);}},[singleProductQuery.status,singleProductQuery.data]);if(singleProductQuery.isLoading){/*#__PURE__*/_jsx(MaxContentWidth,{children:\"Loading...\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MaxContentWidth,{children:/*#__PURE__*/_jsx(\"div\",{className:style.SingleProduct,children:/*#__PURE__*/_jsxs(TwoColFlex,{children:[/*#__PURE__*/_jsx(\"div\",{className:style.imageCol,children:/*#__PURE__*/_jsx(\"img\",{src:productImage,alt:singleProductQuery===null||singleProductQuery===void 0?void 0:(_singleProductQuery$d5=singleProductQuery.data)===null||_singleProductQuery$d5===void 0?void 0:_singleProductQuery$d5.productname})}),/*#__PURE__*/_jsxs(\"div\",{className:style.productInfoCol,children:[((_singleProductQuery$d6=singleProductQuery.data)===null||_singleProductQuery$d6===void 0?void 0:_singleProductQuery$d6.categoryName)&&/*#__PURE__*/_jsx(\"div\",{className:style.categoryName,children:singleProductQuery.data.categoryName}),/*#__PURE__*/_jsx(\"h1\",{className:style.productTitle,children:(_singleProductQuery$d7=singleProductQuery.data)===null||_singleProductQuery$d7===void 0?void 0:_singleProductQuery$d7.productname}),/*#__PURE__*/_jsx(\"div\",{className:style.reviews,children:\"[reviews]\"}),((_singleProductQuery$d8=singleProductQuery.data)===null||_singleProductQuery$d8===void 0?void 0:_singleProductQuery$d8.tagline)&&/*#__PURE__*/_jsx(\"div\",{className:style.tagline,children:(_singleProductQuery$d9=singleProductQuery.data)===null||_singleProductQuery$d9===void 0?void 0:_singleProductQuery$d9.tagline}),((_singleProductQuery$d10=singleProductQuery.data)===null||_singleProductQuery$d10===void 0?void 0:_singleProductQuery$d10.productdescription)&&/*#__PURE__*/_jsx(\"div\",{className:style.description,children:singleProductQuery.data.productdescription}),/*#__PURE__*/_jsx(VariantSelector,{data:(_singleProductQuery$d11=singleProductQuery.data)===null||_singleProductQuery$d11===void 0?void 0:_singleProductQuery$d11.productVariants,setVariant:updateselectedvariantID,selectedVariantID:selectedvariantID,selectedVariantIDName:selectedvariantIDName}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return updateCart();},children:[\" \",/*#__PURE__*/_jsx(Button,{value:\"Add to Cart\",backgroundColor:\"#00000000\",textColor:\"#000\",border:\"1px solid #000\"})]})]})]})})})});};export default SingleProduct;","map":{"version":3,"names":["React","useState","useEffect","useParams","style","MaxContentWidth","useSingleProduct","TwoColFlex","VariantSelector","Button","useAppSelector","useAppDispatch","addProductToCart","selectCart","openCartModal","selectModal","SingleProduct","cart","dispatch","openCart","slug","singleProductQuery","selectedvariantID","setselectedvariantID","selectedvariantIDName","setselectedvariantIDName","selectedvariantPrice","setselectedPrice","productImage","setProductImage","updateselectedvariantID","index","variantName","variantImage","variantPrice","updateCart","variantID","quantity","status","data","productVariants","isLoading","imageCol","productname","productInfoCol","categoryName","productTitle","reviews","tagline","productdescription","description"],"sources":["C:/Users/pbitn/Desktop/learning/React/reactjs-ecommerce/src/features/SingleProduct/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport style from \"styles/SingleProduct.module.css\";\r\nimport MaxContentWidth from \"components/Layout/MaxWidthContainer\";\r\nimport { useSingleProduct } from \"./api/getSingleProduct\";\r\nimport TwoColFlex from \"components/Layout/TwoColFlex\";\r\nimport VariantSelector from \"./components/VariantSelector\";\r\nimport Button from \"components/Button\";\r\nimport { useAppSelector, useAppDispatch } from \"hooks\";\r\nimport { addProductToCart, selectCart } from \"stores/cartSlice\";\r\nimport { openCartModal, selectModal } from \"stores/cartModalSlice\";\r\n\r\n/* Uses slug in URL to fetch the product data from the API. */\r\n\r\nconst SingleProduct = () => {\r\n  const cart = useAppSelector(selectCart);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const openCart = useAppSelector(selectModal);\r\n\r\n  const { slug } = useParams();\r\n  const singleProductQuery = useSingleProduct({ slug });\r\n\r\n  const [selectedvariantID, setselectedvariantID] = useState();\r\n  const [selectedvariantIDName, setselectedvariantIDName] = useState(\"\");\r\n  const [selectedvariantPrice, setselectedPrice] = useState(\"\");\r\n  const [productImage, setProductImage] = useState(\"\");\r\n\r\n  function updateselectedvariantID(\r\n    index: any,\r\n    variantName: any,\r\n    variantImage: string,\r\n    variantPrice: string\r\n  ) {\r\n    setselectedvariantID(index);\r\n    setselectedvariantIDName(variantName);\r\n    setselectedPrice(variantPrice);\r\n    setProductImage(variantImage);\r\n  }\r\n  function updateCart() {\r\n    dispatch(\r\n      addProductToCart({\r\n        variantID: selectedvariantID,\r\n        variantImage: productImage,\r\n        variantName: selectedvariantIDName,\r\n        variantPrice: selectedvariantPrice,\r\n        quantity: 1,\r\n      })\r\n    );\r\n\r\n    dispatch(openCartModal('open'));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (singleProductQuery.status === \"success\") {\r\n      setselectedvariantID(\r\n        singleProductQuery.data?.productVariants[0].variantID\r\n      );\r\n      setselectedvariantIDName(\r\n        singleProductQuery.data?.productVariants[0].variantName\r\n      );\r\n\r\n      setselectedPrice(\r\n        singleProductQuery.data?.productVariants[0].variantPrice\r\n      );\r\n\r\n      setProductImage(singleProductQuery.data?.productVariants[0].variantImage);\r\n    }\r\n  }, [singleProductQuery.status, singleProductQuery.data]);\r\n\r\n\r\n  if (singleProductQuery.isLoading) {\r\n    <MaxContentWidth>Loading...</MaxContentWidth>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <MaxContentWidth>\r\n        <div className={style.SingleProduct}>\r\n          <TwoColFlex>\r\n            <div className={style.imageCol}>\r\n              <img\r\n                src={productImage}\r\n                alt={singleProductQuery?.data?.productname}\r\n              />\r\n            </div>\r\n            <div className={style.productInfoCol}>\r\n              {singleProductQuery.data?.categoryName && (\r\n                <div className={style.categoryName}>\r\n                  {singleProductQuery.data.categoryName}\r\n                </div>\r\n              )}\r\n              <h1 className={style.productTitle}>\r\n                {singleProductQuery.data?.productname}\r\n              </h1>\r\n              <div className={style.reviews}>[reviews]</div>\r\n              {singleProductQuery.data?.tagline && (\r\n                <div className={style.tagline}>\r\n                  {singleProductQuery.data?.tagline}\r\n                </div>\r\n              )}\r\n              {singleProductQuery.data?.productdescription && (\r\n                <div className={style.description}>\r\n                  {singleProductQuery.data.productdescription}\r\n                </div>\r\n              )}\r\n              <VariantSelector\r\n                data={singleProductQuery.data?.productVariants}\r\n                setVariant={updateselectedvariantID}\r\n                selectedVariantID={selectedvariantID}\r\n                selectedVariantIDName={selectedvariantIDName}\r\n              />\r\n              <div\r\n                onClick={() =>\r\n                  updateCart()\r\n                }\r\n              >\r\n                {\" \"}\r\n                <Button\r\n                  value=\"Add to Cart\"\r\n                  backgroundColor=\"#00000000\"\r\n                  textColor=\"#000\"\r\n                  border=\"1px solid #000\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </TwoColFlex>\r\n        </div>\r\n      </MaxContentWidth>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SingleProduct;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}